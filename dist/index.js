!function(e){"use strict";function t(e){const t=e.split(":").map(Number);return 3600*t[0]+60*t[1]+t[2]}var a=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,n="[1-9]\\d?",r="\\d\\d",s="[^\\s]+",o=/\[([^]*?)\]/gm;function i(e,t){for(var a=[],n=0,r=e.length;n<r;n++)a.push(e[n].substr(0,t));return a}var c=function(e){return function(t,a){var n=a[e].map((function(e){return e.toLowerCase()})).indexOf(t.toLowerCase());return n>-1?n:null}};function u(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];for(var n=0,r=t;n<r.length;n++){var s=r[n];for(var o in s)e[o]=s[o]}return e}var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=["January","February","March","April","May","June","July","August","September","October","November","December"],h=i(m,3),d={dayNamesShort:i(l,3),dayNames:l,monthNamesShort:h,monthNames:m,amPm:["am","pm"],DoFn:function(e){return e+["th","st","nd","rd"][e%10>3?0:(e-e%10!=10?1:0)*e%10]}},f=u({},d),g=function(e,t){for(void 0===t&&(t=2),e=String(e);e.length<t;)e="0"+e;return e},p={D:function(e){return String(e.getDate())},DD:function(e){return g(e.getDate())},Do:function(e,t){return t.DoFn(e.getDate())},d:function(e){return String(e.getDay())},dd:function(e){return g(e.getDay())},ddd:function(e,t){return t.dayNamesShort[e.getDay()]},dddd:function(e,t){return t.dayNames[e.getDay()]},M:function(e){return String(e.getMonth()+1)},MM:function(e){return g(e.getMonth()+1)},MMM:function(e,t){return t.monthNamesShort[e.getMonth()]},MMMM:function(e,t){return t.monthNames[e.getMonth()]},YY:function(e){return g(String(e.getFullYear()),4).substr(2)},YYYY:function(e){return g(e.getFullYear(),4)},h:function(e){return String(e.getHours()%12||12)},hh:function(e){return g(e.getHours()%12||12)},H:function(e){return String(e.getHours())},HH:function(e){return g(e.getHours())},m:function(e){return String(e.getMinutes())},mm:function(e){return g(e.getMinutes())},s:function(e){return String(e.getSeconds())},ss:function(e){return g(e.getSeconds())},S:function(e){return String(Math.round(e.getMilliseconds()/100))},SS:function(e){return g(Math.round(e.getMilliseconds()/10),2)},SSS:function(e){return g(e.getMilliseconds(),3)},a:function(e,t){return e.getHours()<12?t.amPm[0]:t.amPm[1]},A:function(e,t){return e.getHours()<12?t.amPm[0].toUpperCase():t.amPm[1].toUpperCase()},ZZ:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+g(100*Math.floor(Math.abs(t)/60)+Math.abs(t)%60,4)},Z:function(e){var t=e.getTimezoneOffset();return(t>0?"-":"+")+g(Math.floor(Math.abs(t)/60),2)+":"+g(Math.abs(t)%60,2)}},b=function(e){return+e-1},_=[null,n],y=[null,s],v=["isPm",s,function(e,t){var a=e.toLowerCase();return a===t.amPm[0]?0:a===t.amPm[1]?1:null}],w=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(e){var t=(e+"").match(/([+-]|\d\d)/gi);if(t){var a=60*+t[1]+parseInt(t[2],10);return"+"===t[0]?a:-a}return 0}],S=(c("monthNamesShort"),c("monthNames"),{default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"});var D=function(e,t,n){if(void 0===t&&(t=S.default),void 0===n&&(n={}),"number"==typeof e&&(e=new Date(e)),"[object Date]"!==Object.prototype.toString.call(e)||isNaN(e.getTime()))throw new Error("Invalid Date pass to format");var r=[];t=(t=S[t]||t).replace(o,(function(e,t){return r.push(t),"@@@"}));var s=u(u({},f),n);return(t=t.replace(a,(function(t){return p[t](e,s)}))).replace(/@@@/g,(function(){return r.shift()}))};const M=function(){try{(new Date).toLocaleDateString("i")}catch(e){return"RangeError"===e.name}return!1}()?(e,t)=>e.toLocaleDateString(t.language,{year:"numeric",month:"long",day:"numeric"}):e=>D(e,"mediumDate");const k=function(){try{(new Date).toLocaleString("i")}catch(e){return"RangeError"===e.name}return!1}()?(e,t)=>e.toLocaleString(t.language,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"2-digit"}):e=>D(e,"haDateTime");const N=function(){try{(new Date).toLocaleTimeString("i")}catch(e){return"RangeError"===e.name}return!1}()?(e,t)=>e.toLocaleTimeString(t.language,{hour:"numeric",minute:"2-digit"}):e=>D(e,"shortTime"),T=[60,60,24,7],Y=["second","minute","hour","day"];const O=e=>e<10?"0".concat(e):e;function F(e){return e.substr(0,e.indexOf("."))}function x(e){const t=e.locale.language||"en";return e.translationMetadata.translations[t]&&e.translationMetadata.translations[t].isRTL||!1}function E(e){return F(e.entity_id)}var I,A;e.NumberFormat=void 0,(I=e.NumberFormat||(e.NumberFormat={})).language="language",I.system="system",I.comma_decimal="comma_decimal",I.decimal_comma="decimal_comma",I.space_comma="space_comma",I.none="none",e.TimeFormat=void 0,(A=e.TimeFormat||(e.TimeFormat={})).language="language",A.system="system",A.am_pm="12",A.twenty_four="24";const H=(t,a,n)=>{let r;switch(null==a?void 0:a.number_format){case e.NumberFormat.comma_decimal:r=["en-US","en"];break;case e.NumberFormat.decimal_comma:r=["de","es","it"];break;case e.NumberFormat.space_comma:r=["fr","sv","cs"];break;case e.NumberFormat.system:r=void 0;break;default:r=null==a?void 0:a.language}if(Number.isNaN=Number.isNaN||function e(t){return"number"==typeof t&&e(t)},!Number.isNaN(Number(t))&&Intl&&(null==a?void 0:a.number_format)!==e.NumberFormat.none)try{return new Intl.NumberFormat(r,C(t,n)).format(Number(t))}catch(e){return console.error(e),new Intl.NumberFormat(void 0,C(t,n)).format(Number(t))}return t?t.toString():""},C=(e,t)=>{const a=t||{};if("string"!=typeof e)return a;if(!t||!t.minimumFractionDigits&&!t.maximumFractionDigits){const t=e.indexOf(".")>-1?e.split(".")[1].length:0;a.minimumFractionDigits=t,a.maximumFractionDigits=t}return a};const L="hass:bookmark",R=["closed","locked","off"],P=new Set(["fan","input_boolean","light","switch","group","automation"]),z=(e,t,a,n)=>{n=n||{},a=null==a?{}:a;const r=new Event(t,{bubbles:void 0===n.bubbles||n.bubbles,cancelable:Boolean(n.cancelable),composed:void 0===n.composed||n.composed});return r.detail=a,e.dispatchEvent(r),r},U=new Set(["call-service","divider","section","weblink","cast","select"]),j={alert:"toggle",automation:"toggle",climate:"climate",cover:"cover",fan:"toggle",group:"group",input_boolean:"toggle",input_number:"input-number",input_select:"input-select",input_text:"input-text",light:"toggle",lock:"lock",media_player:"media-player",remote:"toggle",scene:"scene",script:"script",sensor:"sensor",timer:"timer",switch:"toggle",vacuum:"toggle",water_heater:"climate",input_datetime:"input-datetime"},q={alert:"hass:alert",automation:"hass:playlist-play",calendar:"hass:calendar",camera:"hass:video",climate:"hass:thermostat",configurator:"hass:settings",conversation:"hass:text-to-speech",device_tracker:"hass:account",fan:"hass:fan",group:"hass:google-circles-communities",history_graph:"hass:chart-line",homeassistant:"hass:home-assistant",homekit:"hass:home-automation",image_processing:"hass:image-filter-frames",input_boolean:"hass:drawing",input_datetime:"hass:calendar-clock",input_number:"hass:ray-vertex",input_select:"hass:format-list-bulleted",input_text:"hass:textbox",light:"hass:lightbulb",mailbox:"hass:mailbox",notify:"hass:comment-alert",person:"hass:account",plant:"hass:flower",proximity:"hass:apple-safari",remote:"hass:remote",scene:"hass:google-pages",script:"hass:file-document",sensor:"hass:eye",simple_alarm:"hass:bell",sun:"hass:white-balance-sunny",switch:"hass:flash",timer:"hass:timer",updater:"hass:cloud-upload",vacuum:"hass:robot-vacuum",water_heater:"hass:thermometer",weblink:"hass:open-in-new"};function Z(e,t){if(e in q)return q[e];switch(e){case"alarm_control_panel":switch(t){case"armed_home":return"hass:bell-plus";case"armed_night":return"hass:bell-sleep";case"disarmed":return"hass:bell-outline";case"triggered":return"hass:bell-ring";default:return"hass:bell"}case"binary_sensor":return t&&"off"===t?"hass:radiobox-blank":"hass:checkbox-marked-circle";case"cover":return"closed"===t?"hass:window-closed":"hass:window-open";case"lock":return t&&"unlocked"===t?"hass:lock-open":"hass:lock";case"media_player":return t&&"off"!==t&&"idle"!==t?"hass:cast-connected":"hass:cast";case"zwave":switch(t){case"dead":return"hass:emoticon-dead";case"sleeping":return"hass:sleep";case"initializing":return"hass:timer-sand";default:return"hass:z-wave"}default:return console.warn("Unable to find icon for domain "+e+" ("+t+")"),L}}const W=e=>{z(window,"haptic",e)},J=(e,t,a=!1)=>{a?history.replaceState(null,"",t):history.pushState(null,"",t),z(window,"location-changed",{replace:a})},G=(e,t,a=!0)=>{const n=F(t),r="group"===n?"homeassistant":n;let s;switch(n){case"lock":s=a?"unlock":"lock";break;case"cover":s=a?"open_cover":"close_cover";break;default:s=a?"turn_on":"turn_off"}return e.callService(r,s,{entity_id:t})},V=(e,t)=>{const a=R.includes(e.states[t].state);return G(e,t,a)},B=(e,t,a,n)=>{if(n||(n={action:"more-info"}),!n.confirmation||n.confirmation.exemptions&&n.confirmation.exemptions.some((e=>e.user===t.user.id))||(W("warning"),confirm(n.confirmation.text||"Are you sure you want to ".concat(n.action,"?"))))switch(n.action){case"more-info":(a.entity||a.camera_image)&&z(e,"hass-more-info",{entityId:a.entity?a.entity:a.camera_image});break;case"navigate":n.navigation_path&&J(0,n.navigation_path);break;case"url":n.url_path&&window.open(n.url_path);break;case"toggle":a.entity&&(V(t,a.entity),W("success"));break;case"call-service":{if(!n.service)return void W("failure");const[e,a]=n.service.split(".",2);t.callService(e,a,n.service_data),W("success");break}case"fire-dom-event":z(e,"ll-custom",n)}};const K={humidity:"hass:water-percent",illuminance:"hass:brightness-5",temperature:"hass:thermometer",pressure:"hass:gauge",power:"hass:flash",signal_strength:"hass:wifi"},Q={binary_sensor:e=>{const t=e.state&&"off"===e.state;switch(e.attributes.device_class){case"battery":return t?"hass:battery":"hass:battery-outline";case"cold":return t?"hass:thermometer":"hass:snowflake";case"connectivity":return t?"hass:server-network-off":"hass:server-network";case"door":return t?"hass:door-closed":"hass:door-open";case"garage_door":return t?"hass:garage":"hass:garage-open";case"gas":case"power":case"problem":case"safety":case"smoke":return t?"hass:shield-check":"hass:alert";case"heat":return t?"hass:thermometer":"hass:fire";case"light":return t?"hass:brightness-5":"hass:brightness-7";case"lock":return t?"hass:lock":"hass:lock-open";case"moisture":return t?"hass:water-off":"hass:water";case"motion":return t?"hass:walk":"hass:run";case"occupancy":return t?"hass:home-outline":"hass:home";case"opening":return t?"hass:square":"hass:square-outline";case"plug":return t?"hass:power-plug-off":"hass:power-plug";case"presence":return t?"hass:home-outline":"hass:home";case"sound":return t?"hass:music-note-off":"hass:music-note";case"vibration":return t?"hass:crop-portrait":"hass:vibrate";case"window":return t?"hass:window-closed":"hass:window-open";default:return t?"hass:radiobox-blank":"hass:checkbox-marked-circle"}},cover:e=>{const t="closed"!==e.state;switch(e.attributes.device_class){case"garage":return t?"hass:garage-open":"hass:garage";case"door":return t?"hass:door-open":"hass:door-closed";case"shutter":return t?"hass:window-shutter-open":"hass:window-shutter";case"blind":return t?"hass:blinds-open":"hass:blinds";case"window":return t?"hass:window-open":"hass:window-closed";default:return Z("cover",e.state)}},sensor:e=>{const t=e.attributes.device_class;if(t&&t in K)return K[t];if("battery"===t){const t=Number(e.state);if(isNaN(t))return"hass:battery-unknown";const a=10*Math.round(t/10);return a>=100?"hass:battery":a<=0?"hass:battery-alert":"hass".concat(":battery-",a)}const a=e.attributes.unit_of_measurement;return"°C"===a||"°F"===a?"hass:thermometer":Z("sensor")},input_datetime:e=>e.attributes.has_date?e.attributes.has_time?Z("input_datetime"):"hass:calendar":"hass:clock"};e.DEFAULT_DOMAIN_ICON=L,e.DEFAULT_PANEL="lovelace",e.DEFAULT_VIEW_ENTITY_ID="group.default_view",e.DOMAINS_HIDE_MORE_INFO=["input_number","input_select","input_text","scene","weblink"],e.DOMAINS_MORE_INFO_NO_HISTORY=["camera","configurator","history_graph","scene"],e.DOMAINS_TOGGLE=P,e.DOMAINS_WITH_CARD=["climate","cover","configurator","input_select","input_number","input_text","lock","media_player","scene","script","timer","vacuum","water_heater","weblink"],e.DOMAINS_WITH_MORE_INFO=["alarm_control_panel","automation","camera","climate","configurator","cover","fan","group","history_graph","input_datetime","light","lock","media_player","script","sun","updater","vacuum","water_heater","weather"],e.STATES_OFF=R,e.UNIT_C="°C",e.UNIT_F="°F",e.applyThemesOnElement=(e,t,a,n=!1)=>{e._themes||(e._themes={});let r=t.default_theme;("default"===a||a&&t.themes[a])&&(r=a);const s=Object.assign({},e._themes);if("default"!==r){const a=t.themes[r];Object.keys(a).forEach((t=>{const n="--"+t;e._themes[n]="",s[n]=a[t]}))}if(e.updateStyles?e.updateStyles(s):window.ShadyCSS&&window.ShadyCSS.styleSubtree(e,s),!n)return;const o=document.querySelector("meta[name=theme-color]");if(o){o.hasAttribute("default-content")||o.setAttribute("default-content",o.getAttribute("content"));const e=s["--primary-color"]||o.getAttribute("default-content");o.setAttribute("content",e)}},e.computeCardSize=e=>"function"==typeof e.getCardSize?e.getCardSize():4,e.computeDomain=F,e.computeEntity=function(e){return e.substr(e.indexOf(".")+1)},e.computeRTL=x,e.computeRTLDirection=function(e){return x(e)?"rtl":"ltr"},e.computeStateDisplay=function(e,t,a,n){const r=void 0!==n?n:t.state;if("unknown"===r||"unavailable"===r)return e("state.default.".concat(r));if(t.attributes.unit_of_measurement)return"".concat(H(r,a)," ").concat(t.attributes.unit_of_measurement);const s=E(t);if("input_datetime"===s){let e;if(!t.attributes.has_time)return e=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day),M(e,a);if(!t.attributes.has_date){const n=new Date;return e=new Date(n.getFullYear(),n.getMonth(),n.getDay(),t.attributes.hour,t.attributes.minute),N(e,a)}return e=new Date(t.attributes.year,t.attributes.month-1,t.attributes.day,t.attributes.hour,t.attributes.minute),k(e,a)}return"humidifier"===s&&"on"===r&&t.attributes.humidity?"".concat(t.attributes.humidity," %"):"counter"===s||"number"===s?H(r,a):t.attributes.device_class&&e("component.".concat(s,".state.").concat(t.attributes.device_class,".").concat(t.state))||e("component.".concat(s,".state._.").concat(t.state))||t.state},e.computeStateDomain=E,e.createThing=(e,t=!1)=>{const a=(e,t)=>n("hui-error-card",{type:"error",error:e,config:t}),n=(e,t)=>{const n=window.document.createElement(e);try{n.setConfig(t)}catch(n){return console.error(e,n),a(n.message,t)}return n};if(!e||"object"!=typeof e||!t&&!e.type)return a("No type defined",e);let r=e.type;if(r&&r.startsWith("custom:"))r=r.substr("custom:".length);else if(t)if(U.has(r))r="hui-".concat(r,"-row");else{if(!e.entity)return a("Invalid config given.",e);const t=e.entity.split(".",1)[0];r="hui-".concat(j[t]||"text","-entity-row")}else r="hui-".concat(r,"-card");if(customElements.get(r))return n(r,e);const s=a("Custom element doesn't exist: ".concat(e.type,"."),e);s.style.display="None";const o=setTimeout((()=>{s.style.display=""}),2e3);return customElements.whenDefined(e.type).then((()=>{clearTimeout(o),z(s,"ll-rebuild",{},s)})),s},e.debounce=(e,t,a=!1)=>{let n;return function(...r){const s=this,o=a&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,a||e.apply(s,r)}),t),o&&e.apply(s,r)}},e.domainIcon=Z,e.durationToSeconds=t,e.evaluateFilter=(e,t)=>{const a=t.operator||"==",n=t.value||t,r=t.attribute?e.attributes[t.attribute]:e.state;switch(a){case"==":return r===n;case"<=":return r<=n;case"<":return r<n;case">=":return r>=n;case">":return r>n;case"!=":return r!==n;case"regex":return r.match(n);default:return!1}},e.fireEvent=z,e.fixedIcons=q,e.formatDate=M,e.formatDateTime=k,e.formatNumber=H,e.formatTime=N,e.forwardHaptic=W,e.getLovelace=()=>{let e=document.querySelector("home-assistant");if(e=e&&e.shadowRoot,e=e&&e.querySelector("home-assistant-main"),e=e&&e.shadowRoot,e=e&&e.querySelector("app-drawer-layout partial-panel-resolver"),e=e&&e.shadowRoot||e,e=e&&e.querySelector("ha-panel-lovelace"),e=e&&e.shadowRoot,e=e&&e.querySelector("hui-root"),e){const t=e.lovelace;return t.current_view=e.___curView,t}return null},e.handleAction=(e,t,a,n)=>{let r;"double_tap"===n&&a.double_tap_action?r=a.double_tap_action:"hold"===n&&a.hold_action?r=a.hold_action:"tap"===n&&a.tap_action&&(r=a.tap_action),B(e,t,a,r)},e.handleActionConfig=B,e.handleClick=(e,t,a,n,r)=>{let s;if(r&&a.double_tap_action?s=a.double_tap_action:n&&a.hold_action?s=a.hold_action:!n&&a.tap_action&&(s=a.tap_action),s||(s={action:"more-info"}),!s.confirmation||s.confirmation.exemptions&&s.confirmation.exemptions.some((e=>e.user===t.user.id))||confirm(s.confirmation.text||"Are you sure you want to ".concat(s.action,"?")))switch(s.action){case"more-info":(s.entity||a.entity||a.camera_image)&&(z(e,"hass-more-info",{entityId:s.entity?s.entity:a.entity?a.entity:a.camera_image}),s.haptic&&W(s.haptic));break;case"navigate":s.navigation_path&&(J(0,s.navigation_path),s.haptic&&W(s.haptic));break;case"url":s.url_path&&window.open(s.url_path),s.haptic&&W(s.haptic);break;case"toggle":a.entity&&(V(t,a.entity),s.haptic&&W(s.haptic));break;case"call-service":{if(!s.service)return;const[e,n]=s.service.split(".",2),r=Object.assign({},s.service_data);"entity"===r.entity_id&&(r.entity_id=a.entity),t.callService(e,n,r),s.haptic&&W(s.haptic);break}case"fire-dom-event":z(e,"ll-custom",s),s.haptic&&W(s.haptic)}},e.hasAction=function(e){return void 0!==e&&"none"!==e.action},e.hasConfigOrEntityChanged=function(e,t,a){if(t.has("config")||a)return!0;if(e.config.entity){const a=t.get("hass");return!a||a.states[e.config.entity]!==e.hass.states[e.config.entity]}return!1},e.hasDoubleClick=function(e){return void 0!==e&&"none"!==e.action},e.navigate=J,e.relativeTime=function(e,t,a={}){let n=((a.compareTime||new Date).getTime()-e.getTime())/1e3;const r=n>=0?"past":"future",s=!1===a.includeTense?"duration":"".concat(r,"_duration");let o;n=Math.abs(n);for(let e=0;e<T.length;e++){if(n<T[e]){n=Math.floor(n),o=t("ui.components.relative_time.".concat(s,".").concat(Y[e]),"count",n);break}n/=T[e]}return void 0===o&&(n=Math.floor(n),o=t("ui.components.relative_time.".concat(s,".week"),"count",n)),o},e.secondsToDuration=function(e){const t=Math.floor(e/3600),a=Math.floor(e%3600/60),n=Math.floor(e%3600%60);return t>0?"".concat(t,":").concat(O(a),":").concat(O(n)):a>0?"".concat(a,":").concat(O(n)):n>0?""+n:null},e.stateIcon=e=>{if(!e)return L;if(e.attributes.icon)return e.attributes.icon;const t=F(e.entity_id);return t in Q?Q[t](e):Z(t,e.state)},e.timerTimeRemaining=function(e){let a=t(e.attributes.remaining);if("active"===e.state){const t=(new Date).getTime(),n=new Date(e.last_changed).getTime();a=Math.max(a-(t-n)/1e3,0)}return a},e.toggleEntity=V,e.turnOnOffEntities=(e,t,a=!0)=>{const n={};t.forEach((t=>{if(R.includes(e.states[t].state)===a){const e=F(t),a=["cover","lock"].includes(e)?e:"homeassistant";a in n||(n[a]=[]),n[a].push(t)}})),Object.keys(n).forEach((t=>{let r;switch(t){case"lock":r=a?"unlock":"lock";break;case"cover":r=a?"open_cover":"close_cover";break;default:r=a?"turn_on":"turn_off"}const s=n[t];e.callService(t,r,{entity_id:s})}))},e.turnOnOffEntity=G,Object.defineProperty(e,"__esModule",{value:!0})}({});